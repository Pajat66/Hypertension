<view class="container">
  <!-- 顶部导航：显示医生姓名 -->
  <view class="header">
    <image class="back-icon" src="../../images/icon/返回 .png" mode="widthFix" bindtap="goBack" />
    <view class="title">{{currentDoctor.name}} 医生</view>
  </view>

  <!-- 聊天消息列表（可滚动） -->
  <scroll-view class="message-list" scroll-y scroll-with-animation scroll-top="{{scrollTop}}">
    <block wx:for="{{messageList}}" wx:key="index">
      <!-- 医生消息（左对齐，浅蓝色背景） -->
      <view class="message-item doctor-message" wx:if="{{item.type === 'doctor'}}">
        <view class="avatar">
          <image src="{{currentDoctor.avatar || '../../images/icon/医生.png'}}" mode="widthFix" />
        </view>
        <view class="message-content-wrap">
          <view class="message-content">{{item.content}}</view>
          <view class="message-time">{{item.time}}</view>
        </view>
      </view>

      <!-- 患者自己的消息（右对齐，浅绿色背景） -->
      <view class="message-item patient-message" wx:else>
        <view class="message-content-wrap">
          <view class="message-content">{{item.content}}</view>
          <view class="message-time">{{item.time}}</view>
        </view>
        <view class="avatar">
          <image src="../../images/icon/患者.png" mode="widthFix" />
        </view>
      </view>
    </block>
  </scroll-view>

  <!-- 患者发送消息输入区（固定底部） -->
  <view class="reply-bar">
    <input 
      class="reply-input" 
      placeholder="向医生提问..." 
      value="{{replyContent}}"
      bindinput="onInput"
      bindconfirm="sendMessage"
    />
    <button class="send-btn" bindtap="sendMessage">发送</button>
  </view>
</view>